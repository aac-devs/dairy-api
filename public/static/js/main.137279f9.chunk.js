(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{113:function(e,t,n){},126:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n(12),r=n.n(c),o=(n(113),n(14)),i=n(32),s=n(17),l=n(13),u=n.n(l),d=n(23),j="https://aac-diary-app.herokuapp.com/api",b=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",a="".concat(j).concat(e),c=localStorage.getItem("token")||"";return"GET"===n?fetch(a,{method:n,headers:{"x-token":c}}):fetch(a,{method:n,headers:{"Content-Type":"application/json","x-token":c},body:JSON.stringify(t)})},p=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",a="".concat(j).concat(e);return"GET"===n?fetch(a):fetch(a,{method:n,headers:{"Content-Type":"application/json"},body:JSON.stringify(t)})},h={auth:{startChecking:"[Auth] Start checking",finishChecking:"[Auth] Finish Checking",login:"[Auth] Login",logout:"[Auth] Logout"},ui:{setError:"[UI] Set error",removeError:"[UI] Remove error",setSuccess:"[UI] Set success",removeSuccess:"[UI] Remove success",startLoading:"[UI] Start loading",finishLoading:"[UI] Finish loading"},notes:{addNew:"[Notes] New note",active:"[Notes] Set active note",unactive:"[Notes] Set unactive note",load:"[Notes] Load notes",updated:"[Notes] Updated note",delete:"[Notes] Delete note",logoutCleaning:"[Notes] Logout cleaning"}},m=n(6),f=n(39),O=n(44),x=n.n(O),g=function(){var e=Object(d.a)(u.a.mark((function e(t){var n,a,c,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"https://api.cloudinary.com/v1_1/aac-devs-data/upload",(n=new FormData).append("upload_preset","diary-app"),n.append("file",t),e.prev=4,e.next=7,fetch("https://api.cloudinary.com/v1_1/aac-devs-data/upload",{method:"POST",body:n});case 7:if(!(a=e.sent).ok){e.next=13;break}return e.next=11,a.json();case 11:return c=e.sent,e.abrupt("return",c.secure_url);case 13:return e.next=15,a.json();case 15:throw r=e.sent,new Error(r);case 19:throw e.prev=19,e.t0=e.catch(4),new Error(e.t0);case 22:case"end":return e.stop()}}),e,null,[[4,19]])})));return function(t){return e.apply(this,arguments)}}(),v=function(e){return{type:h.ui.setError,payload:e}},w=function(){return{type:h.ui.removeError}},y=function(e){return{type:h.ui.setSuccess,payload:e}},k=function(){return{type:h.ui.removeSuccess}},S=function(){return{type:h.ui.startLoading}},N=function(){return{type:h.ui.finishLoading}},C=function(e){return{type:h.notes.load,payload:e}},E=function(e){return e.map((function(e){var t=e.createdAt,n=(e.updatedAt,e.uid,Object(f.a)(e,["createdAt","updatedAt","uid"]));return n.date=x()(t).format("MM-DD-YYYY"),n}))},A=function(e,t){return{type:h.notes.active,payload:Object(m.a)({id:e},t)}},I=function(){return{type:h.notes.unactive}},D=function(e,t){return{type:h.notes.addNew,payload:Object(m.a)({id:e},t)}},T=function(e,t){return{type:h.notes.updated,payload:{id:e,note:Object(m.a)({id:e},t)}}},z=function(){return{type:h.notes.logoutCleaning}},L=function(e){return{type:h.notes.delete,payload:e}},B=function(e){var t=e.uid,n=e.name;return{type:h.auth.login,payload:{uid:t,name:n}}},R=n(20),_=n(174),W=n(175),P=n(184),G=n(176),U=n(177),F=n(74),M=n(173),Y=n(187),q=n(194),Z=n(193),J=n(179),H=n(180),V=n(181),$=n(67),X=n.n($),K=n(68),Q=n.n(K),ee=n(61),te=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object(a.useState)(e),n=Object(R.a)(t,2),c=n[0],r=n[1],o=function(){r(e)},i=function(e){var t=e.target,n=t.name,a=t.value;r(Object(m.a)(Object(m.a)({},c),{},Object(ee.a)({},n,a)))};return[c,i,o]},ne=n(192),ae=n(172),ce=n(170),re=n(171),oe=n(169),ie=n(2),se=function(e){var t=e.isOpen,n=e.title,a=e.handleClose,c=e.message;return Object(ie.jsx)("div",{children:Object(ie.jsxs)(ne.a,{open:t,onClose:a,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[Object(ie.jsx)(oe.a,{id:"alert-dialog-title",children:n}),Object(ie.jsx)(ce.a,{children:Object(ie.jsx)(re.a,{id:"alert-dialog-description",children:c})}),Object(ie.jsxs)(ae.a,{children:[Object(ie.jsx)(M.a,{onClick:function(){return a(!1)},color:"primary",children:"Cancel"}),Object(ie.jsx)(M.a,{onClick:function(){return a(!0)},color:"primary",autoFocus:!0,children:"Ok"})]})]})})};se.defaultProps={isOpen:!1,handleClose:function(){},message:"Description",title:"Title"};var le=se,ue=Object(_.a)((function(e){return{root:{flexGrow:1,display:"flex",flexDirection:"column",justifyContent:"flex-start",height:"100%"},menuButton:{marginRight:e.spacing(2)},title:{flexGrow:1},appbar:{backgroundColor:"#1976d2"},btn:{borderRadius:0},body:{padding:"10px",flexGrow:1,display:"flex",flexDirection:"column",justifyContent:"flex-start"},iconBtn:{width:"42px",minWidth:"42px",padding:"0px"},icon:{fontSize:"30px",width:"30px",margin:"0px"},square:{backgroundColor:"#fff",height:"150px",width:"150px",margin:"5px"}}})),de=function(){var e=Object(o.b)(),t=Object(o.c)((function(e){return e.notes})).active,n=te(t),c=Object(R.a)(n,3),r=c[0],i=c[1],s=c[2],l=r.title,j=r.body,p=ue(),h=Object(W.a)("(max-width:600px)"),m=Object(a.useState)(!1),O=Object(R.a)(m,2),C=O[0],E=O[1],z=Object(a.useRef)(t.id);Object(a.useEffect)((function(){t.id!==z.current&&(s(t),z.current=t.id)}),[t,s]);return Object(ie.jsxs)("div",{className:p.root,children:[Object(ie.jsx)(le,{isOpen:C,handleClose:function(n){var a;E(!1),n&&(e((a=t.id,function(){var e=Object(d.a)(u.a.mark((function e(t){var n,c,r,o;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t(S()),t(w()),t(k()),e.next=6,b("/notes/".concat(a),void 0,"DELETE");case 6:return n=e.sent,e.next=9,n.json();case 9:c=e.sent,r=c.ok,o=c.msg,r?(t(L(a)),t(y("Note deleted successfully!"))):t(v(o)),e.next=19;break;case 15:e.prev=15,e.t0=e.catch(0),console.log("Something went wrong fetching data!"),t(v("Something went wrong fetching data!"));case 19:t(N());case 20:case"end":return e.stop()}}),e,null,[[0,15]])})));return function(t){return e.apply(this,arguments)}}())),e(I()))},title:"Delete Note",message:"Are you sure you want to delete this note?"}),Object(ie.jsx)(G.a,{position:"static",className:p.appbar,children:Object(ie.jsxs)(U.a,{children:[Object(ie.jsx)(F.a,{variant:"subtitle1",className:p.title,children:x()(t.date).format("dddd, MMMM DD[th], YYYY")}),Object(ie.jsx)("input",{id:"fileSelector",type:"file",onChange:function(t){var n=t.target.files[0];n&&e(function(e){return function(){var t=Object(d.a)(u.a.mark((function t(n,a){var c,r,o,i;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n(S()),n(w()),n(k()),c=a().notes.active,t.next=7,g(e);case 7:r=t.sent,c.image=r,o=c.id,i=Object(f.a)(c,["id"]),n(A(o,i)),n(y("Image loaded successfully!")),t.next=18;break;case 14:t.prev=14,t.t0=t.catch(0),console.log("Something went wrong fetching data!"),n(v("Something went wrong fetching data!"));case 18:n(N());case 19:case"end":return t.stop()}}),t,null,[[0,14]])})));return function(e,n){return t.apply(this,arguments)}}()}(n))},style:{display:"none"}}),Object(ie.jsx)(Z.a,{title:"Add an image to the note","aria-label":"add",arrow:!0,placement:"bottom",children:Object(ie.jsx)(M.a,{color:"inherit",className:p.iconBtn,onClick:function(){document.querySelector("#fileSelector").click()},children:Object(ie.jsx)(J.a,{className:p.icon})})}),Object(ie.jsx)(Z.a,{title:"Delete current note","aria-label":"add",arrow:!0,placement:"bottom",children:Object(ie.jsx)(M.a,{color:"inherit",className:p.iconBtn,onClick:function(){E(!0)},children:Object(ie.jsx)(X.a,{className:p.icon})})}),Object(ie.jsx)(Z.a,{title:"Update current note","aria-label":"add",arrow:!0,placement:"bottom",children:Object(ie.jsx)(M.a,{color:"inherit",className:p.iconBtn,children:Object(ie.jsx)(H.a,{className:p.icon,onClick:function(){var t;e((t={title:l,body:j},function(){var e=Object(d.a)(u.a.mark((function e(n,a){var c,r,o,i,s,l,d,j,p,h,m,O,x,g,C;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n(S()),n(w()),n(k()),c=a().notes.active,r=c.id,o=c.image,(i=t).image=o,s=r?"/notes/".concat(r):"/notes",l=r?"PUT":"POST",e.next=11,b(s,i,l);case 11:return d=e.sent,e.next=14,d.json();case 14:j=e.sent,p=j.ok,h=j.note,m=j.msg,O=j.error,p?(x=h.id,h.uid,h.updatedAt,g=h.createdAt,(C=Object(f.a)(h,["id","uid","updatedAt","createdAt"])).date=g,"POST"===l?(n(D(x,C)),n(y("Note created successfully!"))):(n(T(x,C)),n(y("Note updated successfully!"))),n(A(x,C))):n(v(m||O||"")),e.next=26;break;case 22:e.prev=22,e.t0=e.catch(0),console.log("Something went wrong fetching data!"),n(v("Something went wrong fetching data!"));case 26:n(N());case 27:case"end":return e.stop()}}),e,null,[[0,22]])})));return function(t,n){return e.apply(this,arguments)}}()))}})})}),h&&Object(ie.jsx)(Z.a,{title:"Back to note list","aria-label":"add",arrow:!0,placement:"bottom",children:Object(ie.jsx)(M.a,{color:"inherit",className:p.iconBtn,type:"button",onClick:function(){e(I())},children:Object(ie.jsx)(V.a,{className:p.icon})})})]})}),Object(ie.jsxs)("div",{className:p.body,children:[Object(ie.jsx)(Y.a,{id:"standard-multiline-flexible",label:"Title",multiline:!0,rowsMax:4,placeholder:"Write an awesome title!",value:l,name:"title",onChange:i}),Object(ie.jsx)("br",{}),Object(ie.jsx)(Y.a,{id:"standard-textarea",label:"Body",placeholder:"Describe your note.",multiline:!0,name:"body",value:j,onChange:i}),Object(ie.jsx)("br",{}),Object(ie.jsx)(q.a,{variant:"square",className:p.square,src:t.image,children:Object(ie.jsx)(Q.a,{color:"disabled",fontSize:"large"})})]})]})},je=n(91),be=n.n(je),pe=n(90),he=n.n(pe),me=n(182),fe=n(89),Oe=n.n(fe),xe=n(188),ge=Object(_.a)((function(){return{root:{width:"100%"},card:{marginBottom:"10px",width:"100%",display:"flex",justifyContent:"space-between",borderRadius:5,backgroundColor:"#fff",border:"1px solid #777",boxShadow:"1px 1px 2px #aaa",cursor:"pointer"},body:{margin:"5px 0",flexGrow:1},date:{margin:"5px",width:"60px",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},square:{backgroundColor:"#fff",height:"70px",width:"70px",margin:"5px"},title:{maxHeight:"24px",overflow:"hidden"},description:{maxHeight:"36px",overflow:"hidden"}}})),ve=function(e){var t=e.id,n=e.title,a=e.body,c=e.date,r=e.image,i=Object(o.b)(),s=ge();return Object(ie.jsxs)("div",{className:s.card,onClick:function(){i(A(t,{title:n,body:a,date:c,image:r}))},role:"button",tabIndex:"0",onKeyPress:function(){},children:[Object(ie.jsx)("div",{children:Object(ie.jsx)(q.a,{variant:"square",className:s.square,src:r,children:Object(ie.jsx)(Q.a,{color:"disabled",fontSize:"large"})})}),Object(ie.jsx)("div",{className:s.body,children:Object(ie.jsxs)(F.a,{component:"div",children:[Object(ie.jsx)(xe.a,{textAlign:"left",fontWeight:"fontWeightMedium",fontSize:16,mb:1,className:s.title,children:n}),Object(ie.jsx)(xe.a,{textAlign:"left",fontWeight:"fontWeightLight",fontSize:12,className:s.description,children:a})]})}),Object(ie.jsx)("div",{className:s.date,children:Object(ie.jsxs)(F.a,{component:"div",children:[Object(ie.jsx)(xe.a,{textAlign:"center",fontWeight:"bold",fontSize:16,children:x()(c).format("ddd").toUpperCase()}),Object(ie.jsx)(xe.a,{textAlign:"center",fontWeight:"fontWeightRegular",fontSize:14,children:"".concat(x()(c).date(),"th")})]})})]})};ve.defaultProps={id:0,title:"",body:"",date:"",image:""};var we=ve,ye=Object(_.a)((function(e){return{root:{flexGrow:1,height:"100%",position:"relative"},menuButton:{marginRight:e.spacing(2)},title:{flexGrow:1},appbar:{backgroundColor:"#1c1e21"},noteList:{padding:"10px"},iconBtn:{width:"42px",minWidth:"42px",padding:"0px"},icon:{fontSize:"30px",width:"30px",margin:"0px"},userIcon:{marginRight:"5px"},fab:{position:"absolute",bottom:"20px",right:"10px"},extendedIcon:{marginRight:e.spacing(1)}}})),ke=function(){var e=Object(o.b)(),t=Object(o.c)((function(e){return e.notes})).notes,n=Object(o.c)((function(e){return e.auth})).name,c=ye(),r=Object(a.useState)(!1),i=Object(R.a)(r,2),s=i[0],l=i[1];return Object(ie.jsxs)("div",{className:c.root,children:[Object(ie.jsx)(le,{isOpen:s,handleClose:function(t){l(!1),t&&e(function(){var e=Object(d.a)(u.a.mark((function e(t){var n,a,c,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t(S()),t(w()),t(k()),e.next=6,b("/notes",void 0,"DELETE");case 6:return n=e.sent,e.next=9,n.json();case 9:a=e.sent,c=a.ok,r=a.msg,c?(t(z()),t(y("Notes deleted successfully!"))):t(v(r)),e.next=19;break;case 15:e.prev=15,e.t0=e.catch(0),console.log("Something went wrong fetching data!"),t(v("Something went wrong fetching data!"));case 19:t(N());case 20:case"end":return e.stop()}}),e,null,[[0,15]])})));return function(t){return e.apply(this,arguments)}}())},title:"Delete All Notes",message:"Are you sure you want to delete all notes?"}),Object(ie.jsx)(G.a,{position:"static",className:c.appbar,children:Object(ie.jsxs)(U.a,{children:[Object(ie.jsx)(Oe.a,{className:c.userIcon}),Object(ie.jsx)(F.a,{variant:"subtitle1",className:c.title,children:n}),Object(ie.jsx)(Z.a,{title:"Add new note","aria-label":"add",arrow:!0,placement:"bottom",children:Object(ie.jsx)(M.a,{color:"inherit",onClick:function(){e(I()),e(function(){var e=Object(d.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n={title:"",body:"",date:(new Date).getTime(),image:""},t(A(null,n));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},className:c.iconBtn,children:Object(ie.jsx)(he.a,{className:c.icon})})}),Object(ie.jsx)(Z.a,{title:"Logout","aria-label":"add",arrow:!0,placement:"bottom",children:Object(ie.jsx)(M.a,{color:"inherit",onClick:function(){e(function(){var e=Object(d.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t(S()),t(w()),localStorage.removeItem("token"),localStorage.removeItem("token-init-date"),t({type:h.auth.logout}),t(z()),t(N());case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},className:c.iconBtn,children:Object(ie.jsx)(be.a,{className:c.icon})})})]})}),Object(ie.jsx)("div",{className:c.noteList,children:t.length>0&&Object(ie.jsx)(ie.Fragment,{children:t.map((function(e){return Object(ie.jsx)(we,Object(m.a)({},e),e.id)}))})}),t.length>0&&Object(ie.jsxs)(me.a,{variant:"extended",color:"secondary","aria-label":"delete",className:c.fab,onClick:function(){l(!0)},children:[Object(ie.jsx)(X.a,{className:c.extendedIcon}),"delete all notes"]})]})},Se=n(183),Ne=Object(_.a)((function(e){return{root:{display:"flex",position:"fixed",top:"30%",left:"50%","& > * + *":{marginLeft:e.spacing(2)}}}})),Ce=function(){var e=Ne();return Object(ie.jsx)("div",{className:e.root,children:Object(ie.jsx)(Se.a,{color:"secondary"})})},Ee=n(92),Ae=n.n(Ee),Ie=Object(_.a)((function(){return{root:{height:"100%",display:"flex",alignItems:"center",justifyContent:"center"},icon:{fontSize:"150px",color:"#aaa"}}})),De=function(){var e=Ie();return Object(ie.jsx)("div",{className:e.root,children:Object(ie.jsx)(Ae.a,{className:e.icon})})},Te=n(191),ze=n(189);function Le(e){return Object(ie.jsx)(ze.a,Object(m.a)({elevation:6,variant:"filled"},e))}var Be=Object(_.a)((function(e){return{root:{width:"100%","& > * + *":{marginTop:e.spacing(2)}}}})),Re=function(e){var t=e.isOpen,n=e.handleClose,a=e.type,c=e.message,r=Be();return Object(ie.jsx)("div",{className:r.root,children:Object(ie.jsx)(Te.a,{open:t,autoHideDuration:"error"===a?5e3:2e3,onClose:n,anchorOrigin:{vertical:"top",horizontal:"center"},children:Object(ie.jsx)(Le,{onClose:n,severity:a,children:c})})})};Re.defaultProps={isOpen:!1,handleClose:function(){},type:"success",message:"Notificando una acci\xf3n realizada"};var _e=Re,We=Object(_.a)((function(){return{root:{flexGrow:1,height:"100%"},grid:{height:"100%"},sidebar:{backgroundColor:"#1c1e21"},main:{}}})),Pe=function(){var e=Object(o.b)(),t=We(),n=Object(o.c)((function(e){return e.ui})),c=n.loading,r=n.msgError,i=n.msgSuccess,s=Object(o.c)((function(e){return e.notes})).active,l=Object(W.a)("(max-width:600px)"),j=Object(a.useState)(!1),p=Object(R.a)(j,2),h=p[0],m=p[1];Object(a.useEffect)((function(){e(function(){var e=Object(d.a)(u.a.mark((function e(t){var n,a,c,r,o,i;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t(S()),t(w()),t(k()),e.next=6,b("/notes");case 6:return n=e.sent,e.next=9,n.json();case 9:a=e.sent,c=a.ok,r=a.notes,o=a.msg,i=a.error,c?(t(C(E(r.rows))),t(y("Notes readed successfully!"))):t(v(o||i||"")),e.next=21;break;case 17:e.prev=17,e.t0=e.catch(0),console.log("Something went wrong fetching data!"),t(v("Something went wrong fetching data!"));case 21:t(N());case 22:case"end":return e.stop()}}),e,null,[[0,17]])})));return function(t){return e.apply(this,arguments)}}())}),[e]),Object(a.useEffect)((function(){(r||i)&&m(!0)}),[r,i]);return Object(ie.jsxs)("div",{className:t.root,children:[c&&Object(ie.jsx)(Ce,{}),Object(ie.jsx)(_e,{isOpen:h,handleClose:function(){m(!1),e(k()),e(w())},type:r?"error":"success",message:r||i}),Object(ie.jsxs)(P.a,{container:!0,spacing:0,className:t.grid,children:[Object(ie.jsx)(P.a,{item:!0,xs:!s&&12,sm:5,md:4,className:t.sidebar,children:l&&s?null:Object(ie.jsx)(ke,{})}),Object(ie.jsx)(P.a,{item:!0,xs:!!s&&12,sm:7,md:8,className:t.main,children:s?Object(ie.jsx)(de,{}):!l&&Object(ie.jsx)(De,{})})]})]})},Ge=n(185),Ue=n(186),Fe=Object(_.a)((function(){return{root:{height:"100vh",width:"100%",display:"flex",alignItems:"center",justifyContent:"center"},card:{minWidth:280,width:350,margin:"0 20px",display:"flex",flexDirection:"column",padding:15,borderRadius:10,border:"1px solid #eee",boxShadow:"2px 2px 5px #aaa"},title:{fontSize:"2rem",textAlign:"center",textTransform:"capitalize",fontWeight:700,marginBottom:"1rem"},link:{color:"dodgerBlue"}}})),Me=function(){var e=Object(o.b)(),t=te({email:"",password:""}),n=Object(R.a)(t,3),c=n[0],r=n[1],s=n[2],l=c.email,j=c.password,b=Object(o.c)((function(e){return e.ui})),h=b.msgError,f=b.msgSuccess,O=Object(a.useState)(!1),x=Object(R.a)(O,2),g=x[0],y=x[1],C=Fe(),E=Object(a.useState)({email:!1,password:!1}),A=Object(R.a)(E,2),I=A[0],D=A[1],T=Object(a.useState)(!1),z=Object(R.a)(T,2),L=z[0],_=z[1],W=function(t){var n;t.preventDefault(),e((n={email:l.trim(),password:j.trim()},function(){var e=Object(d.a)(u.a.mark((function e(t){var a,c,r,o,i,s,l,d;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t(w()),t(S()),e.next=5,p("/auth",n,"POST");case 5:return a=e.sent,e.next=8,a.json();case 8:c=e.sent,r=c.ok,o=c.uid,i=c.name,s=c.token,l=c.msg,d=c.error,r?(localStorage.setItem("token",s),localStorage.setItem("token-init-date",(new Date).getTime()),t(B({uid:o,name:i}))):t(v(l||d||"")),e.next=21;break;case 18:e.prev=18,e.t0=e.catch(0),t(v(e.t0));case 21:t(N());case 22:case"end":return e.stop()}}),e,null,[[0,18]])})));return function(t){return e.apply(this,arguments)}}()))};Object(a.useEffect)((function(){(h||f)&&y(!0)}),[h,f]);return Object(a.useEffect)((function(){var e=RegExp(/^[-\w.%+]{1,64}@(?:[A-Z0-9-]{1,63}\.){1,125}[A-Z]{2,63}$/i);D(Object(m.a)(Object(m.a)({},I),{},{email:e.test(l)}))}),[c.email]),Object(a.useEffect)((function(){j.length>=6?D(Object(m.a)(Object(m.a)({},I),{},{password:!0})):D(Object(m.a)(Object(m.a)({},I),{},{password:!1}))}),[c.password]),Object(a.useEffect)((function(){var e=I.email,t=I.password;_(!(!e||!t))}),[I]),Object(ie.jsxs)(ie.Fragment,{children:[Object(ie.jsx)(_e,{isOpen:g,handleClose:function(){y(!1),e(k()),e(w()),s()},type:h?"error":"success",message:h||f}),Object(ie.jsx)("div",{className:C.root,children:Object(ie.jsxs)("form",{className:C.card,noValidate:!0,autoComplete:"off",onSubmit:W,children:[Object(ie.jsx)("div",{className:C.title,children:"Login"}),Object(ie.jsx)(Y.a,{label:"Email",variant:"outlined",onChange:r,name:"email",value:l,size:"medium",error:""!==l&&!I.email}),Object(ie.jsx)("br",{}),Object(ie.jsx)(Y.a,{label:"Password",variant:"outlined",onChange:r,name:"password",value:j,type:"password",size:"medium",error:""!==j&&!I.password}),Object(ie.jsx)("br",{}),L?Object(ie.jsx)(M.a,{variant:"contained",color:"primary",onClick:W,size:"medium",endIcon:Object(ie.jsx)(Ge.a,{children:"send"}),children:"Send"}):Object(ie.jsx)(M.a,{variant:"contained",endIcon:Object(ie.jsx)(Ge.a,{children:"send"}),disabled:!0,children:"Send"}),Object(ie.jsx)("br",{}),Object(ie.jsx)(Ue.a,{component:"button",children:Object(ie.jsx)(i.b,{className:C.link,to:"/auth/register",children:"Create new account"})})]})})]})},Ye=Object(_.a)((function(){return{root:{height:"100vh",width:"100%",display:"flex",alignItems:"center",justifyContent:"center"},card:{minWidth:280,width:350,margin:"0 20px",display:"flex",flexDirection:"column",padding:15,borderRadius:10,border:"1px solid #eee",boxShadow:"2px 2px 5px #aaa"},title:{fontSize:"2rem",textAlign:"center",textTransform:"capitalize",fontWeight:700,marginBottom:"1rem"},link:{color:"dodgerBlue"}}})),qe=function(){var e=Object(o.b)(),t=te({name:"",email:"",pass1:"",pass2:""}),n=Object(R.a)(t,2),c=n[0],r=n[1],s=c.name,l=c.email,j=c.pass1,b=c.pass2,h=Object(o.c)((function(e){return e.ui})),f=h.msgError,O=h.msgSuccess,x=Object(a.useState)(!1),g=Object(R.a)(x,2),y=g[0],C=g[1],E=Ye(),A=Object(a.useState)({name:!1,email:!1,passwords:!1}),I=Object(R.a)(A,2),D=I[0],T=I[1],z=Object(a.useState)(!1),L=Object(R.a)(z,2),_=L[0],W=L[1];Object(a.useEffect)((function(){var e=RegExp(/^[ ',-\.A-Za-z\xE1\xE9\xED\xF3\xFA\xFC]+$/);T(Object(m.a)(Object(m.a)({},D),{},{name:e.test(s)}))}),[c.name]),Object(a.useEffect)((function(){var e=RegExp(/^[-\w.%+]{1,64}@(?:[A-Z0-9-]{1,63}\.){1,125}[A-Z]{2,63}$/i);T(Object(m.a)(Object(m.a)({},D),{},{email:e.test(l)}))}),[c.email]),Object(a.useEffect)((function(){j.length>=6&&b.length>=6?T(j!==b?Object(m.a)(Object(m.a)({},D),{},{passwords:!1}):Object(m.a)(Object(m.a)({},D),{},{passwords:!0})):T(Object(m.a)(Object(m.a)({},D),{},{passwords:!1}))}),[c.pass1,c.pass2]),Object(a.useEffect)((function(){var e=D.name,t=D.email,n=D.passwords;W(!!(e&&t&&n))}),[D]);var P=function(t){var n;t.preventDefault(),_&&e((n={email:l,password:j,name:s},function(){var e=Object(d.a)(u.a.mark((function e(t){var a,c,r,o,i,s,l,d;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t(w()),t(S()),e.next=5,p("/auth/new",n,"POST");case 5:return a=e.sent,e.next=8,a.json();case 8:c=e.sent,r=c.ok,o=c.uid,i=c.name,s=c.token,l=c.msg,d=c.error,r?(localStorage.setItem("token",s),localStorage.setItem("token-init-date",(new Date).getTime()),t(B({uid:o,name:i}))):t(v(l||d||"")),e.next=21;break;case 18:e.prev=18,e.t0=e.catch(0),t(v(e.t0));case 21:t(N());case 22:case"end":return e.stop()}}),e,null,[[0,18]])})));return function(t){return e.apply(this,arguments)}}()))};Object(a.useEffect)((function(){(f||O)&&C(!0)}),[f,O]);return Object(ie.jsxs)(ie.Fragment,{children:[Object(ie.jsx)(_e,{isOpen:y,handleClose:function(){C(!1),e(k()),e(w())},type:f?"error":"success",message:f||O}),Object(ie.jsx)("div",{className:E.root,children:Object(ie.jsxs)("form",{className:E.card,noValidate:!0,autoComplete:"off",onSubmit:P,children:[Object(ie.jsx)("div",{className:E.title,children:"Register"}),Object(ie.jsx)(Y.a,{label:"Name",variant:"outlined",onChange:r,name:"name",value:s,size:"medium",error:""!==s&&!D.name}),Object(ie.jsx)("br",{}),Object(ie.jsx)(Y.a,{label:"Email",variant:"outlined",onChange:r,name:"email",value:l,size:"medium",error:""!==l&&!D.email}),Object(ie.jsx)("br",{}),Object(ie.jsx)(Y.a,{label:"Password",variant:"outlined",onChange:r,name:"pass1",value:j,type:"password",size:"medium"}),Object(ie.jsx)("br",{}),Object(ie.jsx)(Y.a,{label:"Confirm password",variant:"outlined",onChange:r,name:"pass2",value:b,type:"password",size:"medium",error:""!==b&&!D.passwords}),Object(ie.jsx)("br",{}),_?Object(ie.jsx)(M.a,{variant:"contained",color:"primary",onClick:P,size:"medium",endIcon:Object(ie.jsx)(Ge.a,{children:"send"}),children:"Send"}):Object(ie.jsx)(M.a,{variant:"contained",endIcon:Object(ie.jsx)(Ge.a,{children:"send"}),disabled:!0,children:"Send"}),Object(ie.jsx)("br",{}),Object(ie.jsx)(Ue.a,{component:"button",children:Object(ie.jsx)(i.b,{className:E.link,to:"/auth",children:"Already registered?"})})]})})]})},Ze=function(){return Object(ie.jsx)("div",{className:"auth__main",children:Object(ie.jsx)("div",{className:"auth__box-container",children:Object(ie.jsxs)(s.d,{children:[Object(ie.jsx)(s.b,{path:"/auth/login",component:Me}),Object(ie.jsx)(s.b,{path:"/auth/register",component:qe}),Object(ie.jsx)(s.a,{to:"/auth/login"})]})})})},Je=function(e){var t=e.isAuthenticated,n=e.component,a=Object(f.a)(e,["isAuthenticated","component"]);return Object(ie.jsx)(s.b,Object(m.a)(Object(m.a)({},a),{},{component:function(e){return t?Object(ie.jsx)(n,Object(m.a)({},e)):Object(ie.jsx)(s.a,{to:"/auth/login"})}}))},He=function(e){var t=e.isAuthenticated,n=e.component,a=Object(f.a)(e,["isAuthenticated","component"]);return Object(ie.jsx)(s.b,Object(m.a)(Object(m.a)({},a),{},{component:function(e){return t?Object(ie.jsx)(s.a,{to:"/"}):Object(ie.jsx)(n,Object(m.a)({},e))}}))},Ve=function(){var e=Object(o.b)(),t=Object(o.c)((function(e){return e.auth})),n=t.checking,c=t.logged;return Object(a.useEffect)((function(){e(function(){var e=Object(d.a)(u.a.mark((function e(t){var n,a,c,r,o,i,s,l;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t({type:h.auth.startChecking}),t(w()),t(S()),e.next=6,b("/auth");case 6:return n=e.sent,e.next=9,n.json();case 9:a=e.sent,c=a.ok,r=a.uid,o=a.name,i=a.token,s=a.msg,l=a.error,c?(localStorage.setItem("token",i),localStorage.setItem("token-init-date",(new Date).getTime()),t(B({uid:r,name:o}))):t(v(s||l||"")),e.next=22;break;case 19:e.prev=19,e.t0=e.catch(0),t(v(e.t0));case 22:t({type:h.auth.finishChecking}),t(N());case 24:case"end":return e.stop()}}),e,null,[[0,19]])})));return function(t){return e.apply(this,arguments)}}())}),[]),n?Object(ie.jsx)(Ce,{}):Object(ie.jsx)(i.a,{children:Object(ie.jsx)("div",{style:{height:"100%"},children:Object(ie.jsxs)(s.d,{children:[Object(ie.jsx)(He,{path:"/auth",component:Ze,isAuthenticated:c}),Object(ie.jsx)(Je,{exact:!0,path:"/",component:Pe,isAuthenticated:c})]})})})},$e=n(54),Xe=n(93),Ke={checking:!1,logged:!1,uid:null,name:null},Qe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ke,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case h.auth.startChecking:return Object(m.a)(Object(m.a)({},e),{},{checking:!0});case h.auth.finishChecking:return Object(m.a)(Object(m.a)({},e),{},{checking:!1});case h.auth.login:return Object(m.a)(Object(m.a)(Object(m.a)({},e),t.payload),{},{logged:!0});case h.auth.logout:return Ke;default:return e}},et=n(94),tt={count:0,notes:[],active:null},nt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:tt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case h.notes.active:return Object(m.a)(Object(m.a)({},e),{},{active:Object(m.a)({},t.payload)});case h.notes.unactive:return Object(m.a)(Object(m.a)({},e),{},{active:null});case h.notes.addNew:return Object(m.a)(Object(m.a)({},e),{},{notes:[t.payload].concat(Object(et.a)(e.notes))});case h.notes.load:return Object(m.a)(Object(m.a)({},e),{},{count:t.payload.length,notes:t.payload});case h.notes.updated:return Object(m.a)(Object(m.a)({},e),{},{notes:e.notes.map((function(e){return e.id===t.payload.id?t.payload.note:e}))});case h.notes.delete:return Object(m.a)(Object(m.a)({},e),{},{active:null,notes:e.notes.filter((function(e){return e.id!==t.payload}))});case h.notes.logoutCleaning:return Object(m.a)(Object(m.a)({},e),{},{count:0,notes:[],active:null});default:return e}},at={loading:!1,msgError:null,msgSuccess:null},ct=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:at,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case h.ui.setError:return Object(m.a)(Object(m.a)({},e),{},{msgError:t.payload});case h.ui.removeError:return Object(m.a)(Object(m.a)({},e),{},{msgError:null});case h.ui.setSuccess:return Object(m.a)(Object(m.a)({},e),{},{msgSuccess:t.payload});case h.ui.removeSuccess:return Object(m.a)(Object(m.a)({},e),{},{msgSuccess:null});case h.ui.startLoading:return Object(m.a)(Object(m.a)({},e),{},{loading:!0});case h.ui.finishLoading:return Object(m.a)(Object(m.a)({},e),{},{loading:!1});default:return e}},rt=Object($e.b)({auth:Qe,notes:nt,ui:ct}),ot="undefined"!==typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||$e.c,it=Object($e.d)(rt,ot(Object($e.a)(Xe.a))),st=function(){return Object(ie.jsx)(o.a,{store:it,children:Object(ie.jsx)(Ve,{})})};r.a.render(Object(ie.jsx)(st,{}),document.getElementById("root"))}},[[126,1,2]]]);
//# sourceMappingURL=main.137279f9.chunk.js.map